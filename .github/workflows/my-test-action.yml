name: Publish to PyPi

# This will publish a package to TestPyPi (and real Pypi if run on master) with a version
# number generated by versioneer from the most recent tag looking like v____
# TODO: maybe move this into the package job so all release-based actions are together
on:
  workflow_dispatch:
  push:
    tags:
      - 'v*.*.*'

jobs:
  build-n-publish:
    name: Build dist files for PyPi
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        with:
          fetch-depth: 0
      - name: Tell me what's going on here
        run: echo '${{ toJSON(github) }}'
          
